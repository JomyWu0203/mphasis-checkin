<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mphasis é…ç½®æ–‡ä»¶å®‰è£</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            padding: 20px;
        }
        
        .installer {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .icon {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .subtitle {
            color: #7f8c8d;
            margin-bottom: 10px;
            font-size: 1rem;
        }
        
        .description {
            color: #555;
            margin-bottom: 30px;
            line-height: 1.5;
            font-size: 0.95rem;
        }
        
        .install-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 18px 32px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 16px;
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.3);
        }
        
        .install-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 10px rgba(76, 175, 80, 0.3);
        }
        
        .manual-btn {
            background: linear-gradient(45deg, #2196F3, #1976D2);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 16px;
            text-decoration: none;
            display: inline-block;
        }
        
        .manual-btn:active {
            transform: translateY(2px);
        }
        
        .download-link {
            color: #2196F3;
            text-decoration: none;
            font-size: 0.9rem;
            margin: 10px 0;
            display: block;
        }
        
        .warning {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 16px;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #856404;
            line-height: 1.4;
        }
        
        .success {
            background: rgba(76, 175, 80, 0.1);
            border: 2px solid #4CAF50;
            border-radius: 12px;
            padding: 16px;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #2e7d32;
            line-height: 1.4;
            display: none;
        }
        
        .step {
            text-align: left;
            margin: 12px 0;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .step:last-child {
            border-bottom: none;
        }
        
        .step-number {
            background: #4CAF50;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            margin-right: 8px;
        }
        
        .instructions {
            display: none;
            text-align: left;
            margin-top: 20px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 12px;
        }
        
        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 12px;
        }
        
        .device-info {
            font-size: 0.8rem;
            color: #999;
            margin-top: 20px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="installer">
        <div class="icon">ğŸ¢</div>
        <h1>Mphasis æ‰“å¡ç³»çµ±</h1>
        <div class="subtitle">ä¼æ¥­é…ç½®æ–‡ä»¶å®‰è£</div>
        <div class="description">
            é»æ“Šä¸‹æ–¹æŒ‰éˆ•å®‰è£ä¼æ¥­ç´šæ‰“å¡ç³»çµ±é…ç½®æ–‡ä»¶
        </div>
        
        <!-- ä¸»è¦å®‰è£æŒ‰éˆ• -->
        <button class="install-btn" onclick="attemptInstall()" id="installButton">
            ğŸ“² å®‰è£é…ç½®æ–‡ä»¶
        </button>
        
        <!-- æ›¿ä»£æ–¹æ¡ˆæŒ‰éˆ• -->
        <button class="manual-btn" onclick="showInstructions()" id="manualButton">
            ğŸ“– æ‰‹å‹•å®‰è£èªªæ˜
        </button>
        
        <!-- ç›´æ¥ä¸‹è¼‰é€£çµ -->
          <a href="https://raw.githubusercontent.com/jomywu0203/mphasis-checkin/main/optimized_configuration_profile.mobileconfig" class="download-link" download="mphasis_optimized_config.mobileconfig" id="downloadLink">
              ğŸ“¥ ä¸‹è¼‰å„ªåŒ–ç‰ˆé…ç½®æ–‡ä»¶
          </a>
        
        <!-- æˆåŠŸè¨Šæ¯ -->
        <div class="success" id="successMessage">
            <strong>âœ… ä¸‹è¼‰é–‹å§‹ï¼</strong><br>
            è«‹æª¢æŸ¥ä¸‹è¼‰è³‡æ–™å¤¾ï¼Œæ‰¾åˆ°é…ç½®æ–‡ä»¶å¾Œï¼š<br>
            1. é»æ“Šæª”æ¡ˆé–‹å•Ÿ<br>
            2. é¸æ“‡ã€Œè¨­å®šã€<br>
            3. å‰å¾€ï¼šè¨­å®š â†’ ä¸€èˆ¬ â†’ VPN ä¸è®¾å¤‡ç®¡ç†<br>
            4. å®‰è£é…ç½®æ–‡ä»¶
        </div>
        
        <!-- è­¦å‘Šè¨Šæ¯ -->
        <div class="warning">
            <strong>âš ï¸ é‡è¦æé†’ï¼š</strong><br>
            â€¢ æ­¤é…ç½®æ–‡ä»¶åƒ…é©ç”¨æ–¼ iOS è¨­å‚™<br>
            â€¢ å®‰è£å¾Œè«‹å…è¨±ç›¸é—œæ¬Šé™<br>
            â€¢ å¦‚é‡å•é¡Œè«‹è¯çµ¡ IT æ”¯æ´éƒ¨é–€
        </div>
        
        <!-- è©³ç´°å®‰è£èªªæ˜ -->
        <div class="instructions" id="instructions">
            <h3>ğŸ“‹ è©³ç´°å®‰è£æ­¥é©Ÿ</h3>
            
            <div class="step">
                <span class="step-number">1</span>
                <strong>ä¸‹è¼‰é…ç½®æ–‡ä»¶</strong><br>
                é»æ“Šä¸Šæ–¹ã€Œç›´æ¥ä¸‹è¼‰é…ç½®æ–‡ä»¶ã€é€£çµ
            </div>
            
            <div class="step">
                <span class="step-number">2</span>
                <strong>é–‹å•Ÿæª”æ¡ˆ</strong><br>
                åœ¨ã€Œæª”æ¡ˆã€App æˆ–ä¸‹è¼‰è³‡æ–™å¤¾ä¸­æ‰¾åˆ°ä¸¦é»æ“Šæª”æ¡ˆ
            </div>
            
            <div class="step">
                <span class="step-number">3</span>
                <strong>é¸æ“‡è¨­å®š</strong><br>
                å‡ºç¾é¸é …æ™‚é¸æ“‡ã€Œè¨­å®šã€æ‡‰ç”¨ç¨‹å¼
            </div>
            
            <div class="step">
                <span class="step-number">4</span>
                <strong>å‰å¾€ç®¡ç†é é¢</strong><br>
                è¨­å®š â†’ ä¸€èˆ¬ â†’ VPN ä¸è®¾å¤‡ç®¡ç†
            </div>
            
            <div class="step">
                <span class="step-number">5</span>
                <strong>å®‰è£é…ç½®æ–‡ä»¶</strong><br>
                æ‰¾åˆ°ã€ŒMphasis CheckIN ä¼æ¥­é…ç½®ã€ä¸¦é»æ“Šå®‰è£
            </div>
            
            <div class="step">
                <span class="step-number">6</span>
                <strong>ç¢ºèªå®‰è£</strong><br>
                è¼¸å…¥è¨­å‚™å¯†ç¢¼ï¼Œç¢ºèªå®‰è£é…ç½®æ–‡ä»¶
            </div>
            
            <div class="step">
                <span class="step-number">7</span>
                <strong>å®Œæˆ</strong><br>
                ä¸»ç•«é¢æœƒå‡ºç¾ã€ŒMphasisæ‰“å¡ã€æ‡‰ç”¨åœ–ç¤º
            </div>
        </div>
        
        <!-- è¨­å‚™è³‡è¨Š -->
        <div class="device-info" id="deviceInfo">
            æ­£åœ¨æª¢æ¸¬è¨­å‚™...
        </div>
    </div>

    <script>
        // è¨­å‚™æª¢æ¸¬
        function detectDevice() {
            const userAgent = navigator.userAgent;
            const isIOS = /iPad|iPhone|iPod/.test(userAgent);
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);
            
            const deviceInfo = document.getElementById('deviceInfo');
            
            if (isIOS) {
                deviceInfo.innerHTML = `
                    âœ… iOS è¨­å‚™å·²æª¢æ¸¬<br>
                    è¨­å‚™: ${getIOSDevice()}<br>
                    ç‰ˆæœ¬: ${getIOSVersion()}
                `;
                deviceInfo.style.color = '#2e7d32';
            } else if (isMobile) {
                deviceInfo.innerHTML = `
                    âš ï¸ é iOS è¨­å‚™<br>
                    æ­¤é…ç½®æ–‡ä»¶åƒ…é©ç”¨æ–¼ iPhone/iPad
                `;
                deviceInfo.style.color = '#f57c00';
                
                // éš±è—å®‰è£æŒ‰éˆ•
                document.getElementById('installButton').style.display = 'none';
            } else {
                deviceInfo.innerHTML = `
                    ğŸ’» æ¡Œé¢è¨­å‚™<br>
                    è«‹åœ¨ iPhone/iPad ä¸Šé–‹å•Ÿæ­¤é é¢
                `;
                deviceInfo.style.color = '#666';
                
                // éš±è—å®‰è£æŒ‰éˆ•
                document.getElementById('installButton').style.display = 'none';
            }
        }
        
        function getIOSDevice() {
            const userAgent = navigator.userAgent;
            if (/iPad/.test(userAgent)) return 'iPad';
            if (/iPhone/.test(userAgent)) return 'iPhone';
            if (/iPod/.test(userAgent)) return 'iPod';
            return 'iOS Device';
        }
        
        function getIOSVersion() {
            const userAgent = navigator.userAgent;
            const match = userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);
            if (match) {
                return \`\${match[1]}.\${match[2]}\${match[3] ? '.' + match[3] : ''}\`;
            }
            return 'Unknown';
        }
        
        // å˜—è©¦å®‰è£
        function attemptInstall() {
            const downloadLink = document.getElementById('downloadLink');
            const successMessage = document.getElementById('successMessage');
            
            // è§¸ç™¼ä¸‹è¼‰
            downloadLink.click();
            
            // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
            successMessage.style.display = 'block';
            
            // è¨˜éŒ„å®‰è£å˜—è©¦
            console.log('é…ç½®æ–‡ä»¶ä¸‹è¼‰å·²è§¸ç™¼:', new Date().toISOString());
            
            // 3ç§’å¾Œæä¾›é€²ä¸€æ­¥æŒ‡å°
            setTimeout(() => {
                if (confirm('æª”æ¡ˆå·²ä¸‹è¼‰ï¼\\n\\næ˜¯å¦éœ€è¦æŸ¥çœ‹è©³ç´°å®‰è£èªªæ˜ï¼Ÿ')) {
                    showInstructions();
                }
            }, 3000);
        }
        
        // é¡¯ç¤ºå®‰è£èªªæ˜
        function showInstructions() {
            const instructions = document.getElementById('instructions');
            const button = document.getElementById('manualButton');
            
            if (instructions.style.display === 'none' || !instructions.style.display) {
                instructions.style.display = 'block';
                button.textContent = 'ğŸ“– éš±è—èªªæ˜';
            } else {
                instructions.style.display = 'none';
                button.textContent = 'ğŸ“– æ‰‹å‹•å®‰è£èªªæ˜';
            }
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            detectDevice();
            
            // æ›¿æ›ä¸‹è¼‰é€£çµï¼ˆå¦‚æœæœ‰æä¾› GitHub URLï¼‰
            const urlParams = new URLSearchParams(window.location.search);
            const githubUrl = urlParams.get('url');
            
            if (githubUrl) {
                document.getElementById('downloadLink').href = githubUrl;
                console.log('ä½¿ç”¨æä¾›çš„ GitHub URL:', githubUrl);
            }
        });
        
        // é é¢å¯è¦‹æ€§ç›£è½
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'visible') {
                console.log('é é¢é‡æ–°æ¿€æ´»');
            }
        });
        
        // éŒ¯èª¤è™•ç†
        window.addEventListener('error', function(e) {
            console.error('é é¢éŒ¯èª¤:', e.error);
        });
        
        // é˜»æ­¢é¸å–æ–‡å­—ï¼ˆç§»å‹•ç«¯é«”é©—ï¼‰
        document.addEventListener('selectstart', function(e) {
            e.preventDefault();
        });
        
        // é˜»æ­¢å³éµé¸å–®
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
    </script>
</body>
</html>
