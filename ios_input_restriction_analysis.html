<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” iOS è¼¸å…¥é™åˆ¶åˆ†æ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .success { background: #e8f5e8; border-left: 4px solid #4caf50; }
        .error { background: #ffebee; border-left: 4px solid #f44336; }
        .warning { background: #fff3e0; border-left: 4px solid #ff9800; }
        .info { background: #e3f2fd; border-left: 4px solid #2196f3; }
        .btn {
            background: #2196f3;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 8px;
            font-size: 14px;
            width: 100%;
        }
        .btn:hover { background: #1976d2; }
        .btn-warning { background: #ff9800; }
        .btn-success { background: #4caf50; }
        .input-field {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            margin: 8px 0;
            box-sizing: border-box;
        }
        .input-field:disabled {
            background: #f5f5f5;
            color: #999;
        }
        .log {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 12px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .code {
            background: #f5f5f5;
            padding: 12px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
            border: 1px solid #ddd;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>ğŸ” iOS è¼¸å…¥é™åˆ¶åˆ†æå·¥å…·</h1>
        <p>å°ˆé–€åˆ†æé€éé…ç½®æª”æ¡ˆå®‰è£å¾Œçš„è¼¸å…¥é™åˆ¶å•é¡Œ</p>
    </div>

    <div class="card error">
        <h2>âŒ ç™¼ç¾çš„å•é¡Œ</h2>
        <p><strong>é€éå®‰è£æª”å®‰è£å¾Œæ‰ç„¡æ³•è¼¸å…¥</strong></p>
        
        <div class="warning">
            <h3>ğŸ¯ å•é¡Œæ ¹æºï¼šiOS é…ç½®æª”æ¡ˆçš„å®‰å…¨é™åˆ¶</h3>
            <ul>
                <li>ğŸ”’ <strong>å—ç®¡ç†çš„ Web Clip</strong> - ä½¿ç”¨ <code>com.apple.webClip.managed</code></li>
                <li>ğŸ“± <strong>ä¼æ¥­å®‰å…¨æ¨¡å¼</strong> - å¯èƒ½é™åˆ¶è¼¸å…¥æ¬„ä½</li>
                <li>ğŸ›¡ï¸ <strong>iOS MDM é™åˆ¶</strong> - é˜²æ­¢ä¸ç•¶ä¿®æ”¹è¨­å®š</li>
                <li>âš¡ <strong>FullScreen æ¨¡å¼</strong> - å¯èƒ½å½±éŸ¿è¼¸å…¥è¡Œç‚º</li>
            </ul>
        </div>
    </div>

    <div class="card">
        <h2>ğŸ§ª è¼¸å…¥é™åˆ¶æ¸¬è©¦</h2>
        
        <div style="margin: 16px 0;">
            <h3>æ¸¬è©¦ 1: åŸºæœ¬è¼¸å…¥æ¸¬è©¦</h3>
            <input type="text" id="basicInput" class="input-field" placeholder="æ¸¬è©¦åŸºæœ¬æ–‡å­—è¼¸å…¥...">
            <button class="btn" onclick="testBasicInput()">ğŸ” æ¸¬è©¦åŸºæœ¬è¼¸å…¥</button>
        </div>
        
        <div style="margin: 16px 0;">
            <h3>æ¸¬è©¦ 2: URL è¼¸å…¥æ¸¬è©¦</h3>
            <input type="url" id="urlInput" class="input-field" placeholder="æ¸¬è©¦ URL è¼¸å…¥...">
            <button class="btn" onclick="testUrlInput()">ğŸŒ æ¸¬è©¦ URL è¼¸å…¥</button>
        </div>
        
        <div style="margin: 16px 0;">
            <h3>æ¸¬è©¦ 3: localStorage å­˜å–</h3>
            <input type="text" id="storageInput" class="input-field" placeholder="æ¸¬è©¦å„²å­˜åŠŸèƒ½...">
            <button class="btn" onclick="testStorage()">ğŸ’¾ æ¸¬è©¦å„²å­˜</button>
            <button class="btn btn-warning" onclick="loadStorage()">ğŸ“¥ æ¸¬è©¦è¼‰å…¥</button>
        </div>
        
        <div style="margin: 16px 0;">
            <h3>æ¸¬è©¦ 4: å‹•æ…‹è¼¸å…¥æ§åˆ¶</h3>
            <input type="text" id="dynamicInput" class="input-field" placeholder="æ¸¬è©¦å‹•æ…‹å•Ÿç”¨/ç¦ç”¨...">
            <button class="btn" onclick="toggleInput()">ğŸ”„ åˆ‡æ›å•Ÿç”¨ç‹€æ…‹</button>
        </div>
        
        <div id="testResults" style="margin-top: 16px;"></div>
    </div>

    <div class="card">
        <h2>ğŸ”§ é…ç½®æª”æ¡ˆæ¯”è¼ƒ</h2>
        
        <div class="comparison">
            <div class="error" style="padding: 16px; border-radius: 8px;">
                <h3>âŒ å—ç®¡ç†ç‰ˆæœ¬ (æœ‰é™åˆ¶)</h3>
                <div class="code">
&lt;key&gt;PayloadType&lt;/key&gt;
&lt;string&gt;com.apple.webClip.managed&lt;/string&gt;

&lt;key&gt;FullScreen&lt;/key&gt;
&lt;true/&gt;

âš ï¸ å¯èƒ½çš„é™åˆ¶ï¼š
â€¢ è¼¸å…¥æ¬„ä½ç¦ç”¨
â€¢ è¨­å®šç„¡æ³•ä¿®æ”¹
â€¢ localStorage å—é™
â€¢ å®‰å…¨æ¨¡å¼å•Ÿç”¨
</div>
            </div>
            
            <div class="success" style="padding: 16px; border-radius: 8px;">
                <h3>âœ… ç„¡ç®¡ç†ç‰ˆæœ¬ (ç„¡é™åˆ¶)</h3>
                <div class="code">
&lt;key&gt;PayloadType&lt;/key&gt;
&lt;string&gt;com.apple.webClip&lt;/string&gt;

&lt;key&gt;FullScreen&lt;/key&gt;
&lt;false/&gt;

âœ… ç„¡é™åˆ¶ï¼š
â€¢ æ­£å¸¸è¼¸å…¥åŠŸèƒ½
â€¢ å®Œæ•´è¨­å®šæ¬Šé™
â€¢ localStorage å¯ç”¨
â€¢ æ¨™æº–ç¶²é æ¨¡å¼
</div>
            </div>
        </div>
    </div>

    <div class="card">
        <h2>ğŸ› ï¸ è§£æ±ºæ–¹æ¡ˆ</h2>
        
        <div class="success">
            <h3>æ–¹æ¡ˆ 1: ä½¿ç”¨ç„¡ç®¡ç†é…ç½®æª”æ¡ˆ (æ¨è–¦)</h3>
            <p>æˆ‘å·²ç¶“å‰µå»ºäº†ä¸€å€‹æ–°çš„é…ç½®æª”æ¡ˆï¼š<code>ios_ultimate_unmanaged_configuration_profile.mobileconfig</code></p>
            <ul>
                <li>âœ… ç§»é™¤ <code>.managed</code> é™åˆ¶</li>
                <li>âœ… é—œé–‰ FullScreen æ¨¡å¼</li>
                <li>âœ… ä¿æŒå®Œæ•´è¼¸å…¥åŠŸèƒ½</li>
                <li>âœ… å…è¨±æ­£å¸¸çš„ç¶²é äº’å‹•</li>
            </ul>
            
            <button class="btn btn-success" onclick="downloadUnmanagedProfile()">
                ğŸ“¥ ä¸‹è¼‰ç„¡é™åˆ¶ç‰ˆé…ç½®æª”æ¡ˆ
            </button>
        </div>
        
        <div class="info">
            <h3>æ–¹æ¡ˆ 2: ç›´æ¥ç¶²é å­˜å– (å‚™ç”¨)</h3>
            <p>å¦‚æœé…ç½®æª”æ¡ˆä»æœ‰å•é¡Œï¼Œç›´æ¥ä½¿ç”¨ç¶²é ç‰ˆæœ¬ï¼š</p>
            
            <button class="btn" onclick="openDirectWeb()">
                ğŸŒ ç›´æ¥é–‹å•Ÿç¶²é ç‰ˆ (ç„¡å®‰è£)
            </button>
            
            <button class="btn btn-warning" onclick="openDebugTool()">
                ğŸ”§ é–‹å•Ÿè¨­å®šé™¤éŒ¯å·¥å…·
            </button>
        </div>
        
        <div class="warning">
            <h3>æ–¹æ¡ˆ 3: ç§»é™¤ç¾æœ‰é…ç½®æª”æ¡ˆ</h3>
            <p>å…ˆç§»é™¤ç¾æœ‰çš„å—ç®¡ç†é…ç½®æª”æ¡ˆï¼Œå†å®‰è£æ–°ç‰ˆæœ¬ï¼š</p>
            <ol>
                <li>å‰å¾€ã€Œè¨­å®šã€â†’ã€Œä¸€èˆ¬ã€â†’ã€ŒVPNèˆ‡è£ç½®ç®¡ç†ã€</li>
                <li>æ‰¾åˆ°ã€ŒiOSçµ‚æ¥µæ‰“å¡è§£æ±ºæ–¹æ¡ˆã€</li>
                <li>é»æ“Šã€Œç§»é™¤æè¿°æª”ã€</li>
                <li>é‡æ–°å®‰è£ç„¡é™åˆ¶ç‰ˆé…ç½®æª”æ¡ˆ</li>
            </ol>
        </div>
    </div>

    <div class="card">
        <h2>ğŸ“‹ æ¸¬è©¦è¨˜éŒ„</h2>
        <div id="testLog" class="log"></div>
        <button class="btn" onclick="clearLog()">ğŸ—‘ï¸ æ¸…é™¤è¨˜éŒ„</button>
    </div>

    <div class="card">
        <h2>ğŸ” ç³»çµ±è³‡è¨Š</h2>
        <div id="systemInfo" class="log"></div>
    </div>

    <script>
        function log(message) {
            var logElement = document.getElementById('testLog');
            var timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
            console.log(message);
        }

        function showResult(type, message) {
            var resultDiv = document.getElementById('testResults');
            resultDiv.innerHTML = `<div class="${type}" style="margin-top: 16px; padding: 12px; border-radius: 8px;">${message}</div>`;
        }

        function testBasicInput() {
            var input = document.getElementById('basicInput');
            var testValue = 'Test Input ' + new Date().getTime();
            
            log('ğŸ§ª æ¸¬è©¦åŸºæœ¬è¼¸å…¥åŠŸèƒ½...');
            
            try {
                input.value = testValue;
                input.focus();
                
                if (input.value === testValue) {
                    log('âœ… åŸºæœ¬è¼¸å…¥æ­£å¸¸');
                    showResult('success', 'âœ… åŸºæœ¬è¼¸å…¥åŠŸèƒ½æ­£å¸¸');
                } else {
                    log('âŒ åŸºæœ¬è¼¸å…¥å¤±æ•—');
                    showResult('error', 'âŒ åŸºæœ¬è¼¸å…¥åŠŸèƒ½ç•°å¸¸');
                }
                
                log(`   - è¼¸å…¥å€¼: "${input.value}"`);
                log(`   - ç¦ç”¨ç‹€æ…‹: ${input.disabled}`);
                log(`   - å”¯è®€ç‹€æ…‹: ${input.readOnly}`);
                
            } catch (error) {
                log('âŒ åŸºæœ¬è¼¸å…¥æ¸¬è©¦å¤±æ•—: ' + error.message);
                showResult('error', 'âŒ åŸºæœ¬è¼¸å…¥æ¸¬è©¦å¤±æ•—: ' + error.message);
            }
        }

        function testUrlInput() {
            var input = document.getElementById('urlInput');
            var testUrl = 'https://example.com/test-' + Date.now();
            
            log('ğŸŒ æ¸¬è©¦ URL è¼¸å…¥åŠŸèƒ½...');
            
            try {
                input.value = testUrl;
                input.focus();
                
                if (input.value === testUrl) {
                    log('âœ… URL è¼¸å…¥æ­£å¸¸');
                    showResult('success', 'âœ… URL è¼¸å…¥åŠŸèƒ½æ­£å¸¸');
                } else {
                    log('âŒ URL è¼¸å…¥å¤±æ•—');
                    showResult('error', 'âŒ URL è¼¸å…¥åŠŸèƒ½ç•°å¸¸');
                }
                
                log(`   - URL å€¼: "${input.value}"`);
                log(`   - é©—è­‰ç‹€æ…‹: ${input.validity.valid}`);
                
            } catch (error) {
                log('âŒ URL è¼¸å…¥æ¸¬è©¦å¤±æ•—: ' + error.message);
                showResult('error', 'âŒ URL è¼¸å…¥æ¸¬è©¦å¤±æ•—: ' + error.message);
            }
        }

        function testStorage() {
            var input = document.getElementById('storageInput');
            var testData = input.value || ('Test Data ' + new Date().getTime());
            
            log('ğŸ’¾ æ¸¬è©¦ localStorage åŠŸèƒ½...');
            
            try {
                localStorage.setItem('ios_input_test', testData);
                var stored = localStorage.getItem('ios_input_test');
                
                if (stored === testData) {
                    log('âœ… localStorage å„²å­˜æ­£å¸¸');
                    showResult('success', 'âœ… localStorage åŠŸèƒ½æ­£å¸¸');
                } else {
                    log('âŒ localStorage å„²å­˜å¤±æ•—');
                    showResult('error', 'âŒ localStorage åŠŸèƒ½ç•°å¸¸');
                }
                
                log(`   - å„²å­˜å€¼: "${testData}"`);
                log(`   - è®€å–å€¼: "${stored}"`);
                
            } catch (error) {
                log('âŒ localStorage æ¸¬è©¦å¤±æ•—: ' + error.message);
                showResult('error', 'âŒ localStorage ä¸å¯ç”¨: ' + error.message);
            }
        }

        function loadStorage() {
            var input = document.getElementById('storageInput');
            
            log('ğŸ“¥ æ¸¬è©¦ localStorage è¼‰å…¥...');
            
            try {
                var stored = localStorage.getItem('ios_input_test');
                if (stored) {
                    input.value = stored;
                    log('âœ… localStorage è¼‰å…¥æˆåŠŸ');
                    showResult('success', 'âœ… å¾ localStorage è¼‰å…¥æˆåŠŸ');
                } else {
                    log('âš ï¸ localStorage ä¸­æ²’æœ‰è³‡æ–™');
                    showResult('warning', 'âš ï¸ localStorage ä¸­æ²’æœ‰æ¸¬è©¦è³‡æ–™');
                }
                
                log(`   - è¼‰å…¥å€¼: "${stored}"`);
                
            } catch (error) {
                log('âŒ localStorage è¼‰å…¥å¤±æ•—: ' + error.message);
                showResult('error', 'âŒ localStorage è¼‰å…¥å¤±æ•—: ' + error.message);
            }
        }

        function toggleInput() {
            var input = document.getElementById('dynamicInput');
            
            log('ğŸ”„ æ¸¬è©¦å‹•æ…‹è¼¸å…¥æ§åˆ¶...');
            
            try {
                input.disabled = !input.disabled;
                
                log(`âœ… è¼¸å…¥æ¬„ä½åˆ‡æ›ç‚º: ${input.disabled ? 'ç¦ç”¨' : 'å•Ÿç”¨'}`);
                showResult('info', `â„¹ï¸ è¼¸å…¥æ¬„ä½ç¾åœ¨æ˜¯: ${input.disabled ? 'ç¦ç”¨' : 'å•Ÿç”¨'}`);
                
                // æ¸¬è©¦åœ¨ä¸åŒç‹€æ…‹ä¸‹çš„è¼¸å…¥
                if (!input.disabled) {
                    input.value = 'Dynamic Test ' + Date.now();
                    input.focus();
                }
                
            } catch (error) {
                log('âŒ å‹•æ…‹æ§åˆ¶æ¸¬è©¦å¤±æ•—: ' + error.message);
                showResult('error', 'âŒ å‹•æ…‹æ§åˆ¶å¤±æ•—: ' + error.message);
            }
        }

        function downloadUnmanagedProfile() {
            log('ğŸ“¥ æº–å‚™ä¸‹è¼‰ç„¡é™åˆ¶ç‰ˆé…ç½®æª”æ¡ˆ...');
            
            // å‰µå»ºä¸‹è¼‰é€£çµ
            var link = document.createElement('a');
            link.href = 'ios_ultimate_unmanaged_configuration_profile.mobileconfig';
            link.download = 'ios_ultimate_unmanaged_configuration_profile.mobileconfig';
            link.click();
            
            showResult('success', 'âœ… ç„¡é™åˆ¶ç‰ˆé…ç½®æª”æ¡ˆä¸‹è¼‰é–‹å§‹ï¼å®‰è£å¾Œæ‡‰è©²èƒ½æ­£å¸¸è¼¸å…¥ã€‚');
            log('âœ… ä¸‹è¼‰é€£çµå·²è§¸ç™¼');
        }

        function openDirectWeb() {
            log('ğŸŒ é–‹å•Ÿç›´æ¥ç¶²é ç‰ˆæœ¬...');
            
            try {
                window.open('ios_ultimate_checkin.html', '_blank');
                showResult('info', 'â„¹ï¸ å·²é–‹å•Ÿç¶²é ç‰ˆæœ¬ï¼Œç„¡é…ç½®æª”æ¡ˆé™åˆ¶');
                log('âœ… ç¶²é ç‰ˆæœ¬å·²é–‹å•Ÿ');
            } catch (error) {
                log('âŒ é–‹å•Ÿç¶²é ç‰ˆæœ¬å¤±æ•—: ' + error.message);
                showResult('error', 'âŒ ç„¡æ³•é–‹å•Ÿç¶²é ç‰ˆæœ¬');
            }
        }

        function openDebugTool() {
            log('ğŸ”§ é–‹å•Ÿè¨­å®šé™¤éŒ¯å·¥å…·...');
            
            try {
                window.open('teams_settings_debug.html', '_blank');
                showResult('info', 'â„¹ï¸ å·²é–‹å•Ÿé™¤éŒ¯å·¥å…·');
                log('âœ… é™¤éŒ¯å·¥å…·å·²é–‹å•Ÿ');
            } catch (error) {
                log('âŒ é–‹å•Ÿé™¤éŒ¯å·¥å…·å¤±æ•—: ' + error.message);
                showResult('error', 'âŒ ç„¡æ³•é–‹å•Ÿé™¤éŒ¯å·¥å…·');
            }
        }

        function clearLog() {
            document.getElementById('testLog').textContent = '';
            document.getElementById('testResults').innerHTML = '';
        }

        function updateSystemInfo() {
            var systemDiv = document.getElementById('systemInfo');
            var info = [];
            
            // åŸºæœ¬ç³»çµ±è³‡è¨Š
            info.push('ğŸ” ç³»çµ±è³‡è¨Šåˆ†æ:');
            info.push('');
            info.push(`ğŸ“± User Agent: ${navigator.userAgent}`);
            info.push(`ğŸŒ å¹³å°: ${navigator.platform}`);
            info.push(`ğŸ“‹ èªè¨€: ${navigator.language}`);
            info.push(`â° æ™‚å€: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`);
            info.push('');
            
            // æª¢æ¸¬æ˜¯å¦ç‚º iOS
            var isiOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            info.push(`ğŸ“± iOS è£ç½®: ${isiOS ? 'æ˜¯' : 'å¦'}`);
            
            // æª¢æ¸¬æ˜¯å¦åœ¨ Safari
            var isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);
            info.push(`ğŸ§­ Safari ç€è¦½å™¨: ${isSafari ? 'æ˜¯' : 'å¦'}`);
            
            // æª¢æ¸¬æ˜¯å¦ç‚º Web Clip
            var isStandalone = window.navigator.standalone;
            info.push(`ğŸ“² Web Clip æ¨¡å¼: ${isStandalone ? 'æ˜¯ (å¯èƒ½æœ‰é™åˆ¶)' : 'å¦ (ç¶²é æ¨¡å¼)'}`);
            
            // æª¢æ¸¬æ˜¯å¦ç‚ºå…¨è¢å¹•
            var isFullscreen = window.innerHeight === screen.height;
            info.push(`ğŸ–¥ï¸ å…¨è¢å¹•æ¨¡å¼: ${isFullscreen ? 'æ˜¯' : 'å¦'}`);
            
            info.push('');
            
            // localStorage æ”¯æ´
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                info.push('ğŸ’¾ localStorage: âœ… æ”¯æ´');
            } catch (e) {
                info.push('ğŸ’¾ localStorage: âŒ ä¸æ”¯æ´ - ' + e.message);
            }
            
            // æª¢æ¸¬è¢å¹•è³‡è¨Š
            info.push('');
            info.push('ğŸ“ è¢å¹•è³‡è¨Š:');
            info.push(`   - è¦–çª—å¤§å°: ${window.innerWidth} x ${window.innerHeight}`);
            info.push(`   - è¢å¹•å¤§å°: ${screen.width} x ${screen.height}`);
            info.push(`   - è£ç½®åƒç´ æ¯”: ${window.devicePixelRatio}`);
            
            systemDiv.textContent = info.join('\n');
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        window.onload = function() {
            log('ğŸ” iOS è¼¸å…¥é™åˆ¶åˆ†æå·¥å…·å·²è¼‰å…¥');
            updateSystemInfo();
            
            // æª¢æ¸¬æ˜¯å¦ç‚ºå—ç®¡ç†çš„ Web Clip
            if (window.navigator.standalone) {
                log('âš ï¸ æª¢æ¸¬åˆ° Web Clip æ¨¡å¼ï¼Œå¯èƒ½å­˜åœ¨è¼¸å…¥é™åˆ¶');
                showResult('warning', 'âš ï¸ ç›®å‰åœ¨ Web Clip æ¨¡å¼ä¸‹ï¼Œå¯èƒ½å­˜åœ¨è¼¸å…¥é™åˆ¶');
            } else {
                log('â„¹ï¸ ç›®å‰åœ¨æ¨™æº–ç¶²é æ¨¡å¼ä¸‹');
                showResult('info', 'â„¹ï¸ ç›®å‰åœ¨æ¨™æº–ç¶²é æ¨¡å¼ä¸‹ï¼Œæ‡‰è©²æ²’æœ‰è¼¸å…¥é™åˆ¶');
            }
        };
    </script>
</body>
</html>
